(function(c,e){typeof exports=="object"&&typeof module<"u"?module.exports=e(require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["react/jsx-runtime","react"],e):(c=typeof globalThis<"u"?globalThis:c||self,c.Picker=e(c.ReactJSXRuntime,c.React))})(this,function(c,e){"use strict";const j="off",b=e.createContext(null);b.displayName="PickerDataContext";function w(i){const r=e.useContext(b);if(r===null){const n=new Error(`<${i} /> is missing a parent <Picker /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,w),n}return r}const D=e.createContext(null);D.displayName="PickerActionsContext";function y(i){const r=e.useContext(D);if(r===null){const n=new Error(`<${i} /> is missing a parent <Picker /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,y),n}return r}function q(i,r=n=>n){return i.slice().sort((n,a)=>{const s=r(n),o=r(a);if(s===null||o===null)return 0;const l=s.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function z(i,r){switch(r.type){case"REGISTER_OPTION":{const{key:n,option:a}=r;let s=[...i[n]||[],a];return s=q(s,o=>o.element.current),{...i,[n]:s}}case"UNREGISTER_OPTION":{const{key:n,option:a}=r;return{...i,[n]:(i[n]||[]).filter(s=>s!==a)}}default:throw Error(`Unknown action: ${r.type}`)}}function V(i){const{style:r,children:n,value:a,onChange:s,height:o=216,itemHeight:l=36,wheelMode:d=j,...p}=i,P=e.useMemo(()=>({height:l,marginTop:-(l/2),position:"absolute",top:"50%",left:0,width:"100%",pointerEvents:"none"}),[l]),f=e.useMemo(()=>({height:`${o}px`,position:"relative",display:"flex",justifyContent:"center",overflow:"hidden",maskImage:"linear-gradient(to top, transparent, transparent 5%, white 20%, white 80%, transparent 95%, transparent)",WebkitMaskImage:"linear-gradient(to top, transparent, transparent 5%, white 20%, white 80%, transparent 95%, transparent)"}),[o]),[I,T]=e.useReducer(z,{}),g=e.useMemo(()=>({height:o,itemHeight:l,wheelMode:d,value:a,optionGroups:I}),[o,l,a,I,d]),h=e.useCallback((k,m)=>{if(a[k]===m)return!1;const x={...a,[k]:m};return s(x,k),!0},[s,a]),C=e.useCallback((k,m)=>(T({type:"REGISTER_OPTION",key:k,option:m}),()=>T({type:"UNREGISTER_OPTION",key:k,option:m})),[]),M=e.useMemo(()=>({registerOption:C,change:h}),[C,h]);return c.jsxs("div",{style:{...f,...r},...p,children:[c.jsx(D.Provider,{value:M,children:c.jsx(b.Provider,{value:g,children:n})}),c.jsxs("div",{style:P,children:[c.jsx("div",{style:{position:"absolute",top:0,bottom:"auto",left:0,right:"auto",width:"100%",height:"1px",background:"#d9d9d9",transform:"scaleY(0.5)"}}),c.jsx("div",{style:{position:"absolute",top:"auto",bottom:0,left:0,right:"auto",width:"100%",height:"1px",background:"#d9d9d9",transform:"scaleY(0.5)"}})]})]})}const O=e.createContext(null);O.displayName="PickerColumnDataContext";function U(i){const r=e.useContext(O);if(r===null){const n=new Error(`<${i} /> is missing a parent <Picker.Column /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,U),n}return r}function B({style:i,children:r,name:n,...a}){const{height:s,itemHeight:o,wheelMode:l,value:d,optionGroups:p}=w("Picker.Column"),P=e.useMemo(()=>d[n],[d,n]),f=e.useMemo(()=>p[n]||[],[n,p]),I=e.useMemo(()=>{let t=f.findIndex(u=>u.value===P);return t<0&&(t=0),t},[f,P]),T=e.useMemo(()=>s/2-o*f.length+o/2,[s,o,f]),g=e.useMemo(()=>s/2-o/2,[s,o]),[h,C]=e.useState(0);e.useEffect(()=>{C(s/2-o/2-I*o)},[s,o,I]);const M=y("Picker.Column"),k=e.useRef(h);k.current=h;const m=e.useCallback(()=>{let t=0;const u=k.current;u>=g?t=0:u<=T?t=f.length-1:t=-Math.round((u-g)/o),M.change(n,f[t].value)||C(s/2-o/2-t*o)},[M,s,o,n,g,T,f]),[x,_]=e.useState(0),[E,R]=e.useState(!1),[F,H]=e.useState(0),v=e.useCallback(t=>{t<T?t=T-Math.pow(T-t,.8):t>g&&(t=g+Math.pow(t-g,.8)),C(t)},[g,T]),K=e.useCallback(t=>{H(t.targetTouches[0].pageY),_(h)},[h]),A=e.useCallback(t=>{t.cancelable&&t.preventDefault(),E||R(!0);const u=x+t.targetTouches[0].pageY-F;v(u)},[E,x,F,v]),Q=e.useCallback(()=>{E&&(R(!1),H(0),_(0),m())},[m,E]),Z=e.useCallback(()=>{E&&(R(!1),H(0),C(x),_(0))},[E,x]),S=e.useRef(null),G=e.useCallback(t=>{if(t.deltaY===0)return;let u=t.deltaY*.1;Math.abs(u)<o&&(u=o*Math.sign(u)),l==="normal"&&(u=-u);const $=h+u;v($)},[o,h,v,l]),Y=e.useCallback(()=>{m()},[m]),L=e.useCallback(t=>{l!=="off"&&(t.cancelable&&t.preventDefault(),G(t),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{Y()},200))},[Y,G,S,l]),W=e.useRef(null);e.useEffect(()=>{const t=W.current;return t&&(t.addEventListener("touchmove",A,{passive:!1}),t.addEventListener("wheel",L,{passive:!1})),()=>{t&&(t.removeEventListener("touchmove",A),t.removeEventListener("wheel",L))}},[A,L]);const ee=e.useMemo(()=>({flex:"1 1 0%",maxHeight:"100%",transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",transitionDuration:E?"0ms":"300ms",transform:`translate3d(0, ${h}px, 0)`}),[h,E]),te=e.useMemo(()=>({key:n}),[n]);return c.jsx("div",{style:{...ee,...i},ref:W,onTouchStart:K,onTouchEnd:Q,onTouchCancel:Z,...a,children:c.jsx(O.Provider,{value:te,children:r})})}function J(i){return typeof i=="function"}function X({style:i,children:r,value:n,...a}){const s=e.useRef(null),{itemHeight:o,value:l}=w("Picker.Item"),d=y("Picker.Item"),{key:p}=U("Picker.Item");e.useEffect(()=>d.registerOption(p,{value:n,element:s}),[p,d,n]);const P=e.useMemo(()=>({height:`${o}px`,display:"flex",justifyContent:"center",alignItems:"center"}),[o]),f=e.useCallback(()=>{d.change(p,n)},[d,p,n]);return c.jsx("div",{style:{...P,...i},ref:s,onClick:f,...a,children:J(r)?r({selected:l[p]===n}):r})}const N=V;return N.Column=B,N.Item=X,N});
